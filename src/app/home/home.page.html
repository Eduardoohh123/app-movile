<!-- Side Menu -->
<ion-menu contentId="main-content" type="overlay" class="custom-menu" [swipeGesture]="true">
  <ion-header>
    <ion-toolbar>
      <div style="display: flex; justify-content: center; align-items: center; padding: 0.5rem 0;">
        <img src="assets/imagenes/football-scoop.png" alt="Football Scoop" class="menu-logo" />
      </div>
    </ion-toolbar>
  </ion-header>
  
  <ion-content class="menu-content">
    <div class="menu-content-wrapper">
      <!-- User Profile Section -->
      <div class="menu-profile" (click)="navigateToProfile()">
        <ion-avatar class="profile-avatar">
          <img [src]="currentUser?.avatar || 'https://ionicframework.com/docs/img/demos/avatar.svg'" alt="User avatar" />
        </ion-avatar>
        <div class="profile-info">
          <h3>{{ currentUser?.name || 'Usuario' }}</h3>
          <p>Ver perfil</p>
        </div>
        <ion-icon name="chevron-forward-outline" class="profile-arrow"></ion-icon>
      </div>

      <!-- Menu Items -->
      <div class="menu-items-wrapper">
        <ion-list class="menu-list">
          <ion-item button (click)="navigateToLogin()" detail="false">
            <ion-icon slot="start" name="log-in-outline"></ion-icon>
            <ion-label>Iniciar Sesión</ion-label>
          </ion-item>

          <ion-item button (click)="navigateToPage('/matches')" detail="false">
            <ion-icon slot="start" name="football-outline"></ion-icon>
            <ion-label>Partidos</ion-label>
          </ion-item>

          <ion-item button (click)="navigateToPage('/standings')" detail="false">
            <ion-icon slot="start" name="trophy-outline"></ion-icon>
            <ion-label>Clasificación</ion-label>
          </ion-item>

          <ion-item button (click)="navigateToPage('/news')" detail="false">
            <ion-icon slot="start" name="newspaper-outline"></ion-icon>
            <ion-label>Noticias</ion-label>
          </ion-item>

          <ion-item button (click)="navigateToPage('/bets')" detail="false">
            <ion-icon slot="start" name="cash-outline"></ion-icon>
            <ion-label>Apuestas</ion-label>
          </ion-item>

          <ion-item button (click)="navigateToPage('/community')" detail="false">
            <ion-icon slot="start" name="people-outline"></ion-icon>
            <ion-label>Comunidad</ion-label>
          </ion-item>

          <ion-item button (click)="navigateToSettings()" detail="false">
            <ion-icon slot="start" name="settings-outline"></ion-icon>
            <ion-label>Configuración</ion-label>
          </ion-item>

          <ion-item button (click)="logout()" detail="false" lines="none" class="logout-item">
            <ion-icon slot="start" name="log-out-outline" color="danger"></ion-icon>
            <ion-label color="danger">Cerrar Sesión</ion-label>
          </ion-item>
        </ion-list>
      </div>

    <!-- App Info -->
    <div class="menu-footer">
      <p>Versión 1.0.0</p>
      <p class="footer-copyright">© 2025 Tu Empresa</p>
    </div>
    </div>
  </ion-content>
</ion-menu>

<ion-header [translucent]="true" class="custom-header" id="main-content">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="openMenu()">
        <ion-icon name="menu-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="header-logo-container">
      <img src="assets/imagenes/football-scoop.png" alt="Football Scoop Logo" class="header-logo" />
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="openNotifications()">
        <ion-icon name="notifications-outline"></ion-icon>
        <ion-badge *ngIf="notificationCount > 0" class="notification-badge">
          {{ notificationCount }}
        </ion-badge>
      </ion-button>
      <ion-button (click)="openProfile()">
        <ion-avatar class="header-avatar">
          <img [src]="currentUser?.avatar || 'https://ionicframework.com/docs/img/demos/avatar.svg'" alt="User avatar" />
        </ion-avatar>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="home-content" (click)="onContentClick($event)">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-header">
      <div class="greeting-text">
        <h1>{{ getGreeting() }}</h1>
        <p>Bienvenido a Football Scoop</p>
      </div>
      <div class="date-badge">
        <ion-icon name="calendar-outline"></ion-icon>
        <span>{{ currentDate | date: 'dd MMM yyyy' }}</span>
      </div>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card" *ngFor="let stat of stats; let i = index" [attr.data-color-index]="i">
      <div class="stat-icon">
        <ion-icon [name]="stat.icon"></ion-icon>
      </div>
      <div class="stat-content">
        <h3>{{ stat.value }}</h3>
        <p>{{ stat.label }}</p>
      </div>
      <div class="stat-trend" [class.positive]="stat.trend > 0" [class.negative]="stat.trend < 0">
        <ion-icon [name]="stat.trend > 0 ? 'trending-up-outline' : 'trending-down-outline'"></ion-icon>
        <span>{{ stat.trend > 0 ? '+' : '' }}{{ stat.trend }}%</span>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="section-container">
    <div class="section-header">
      <h2>Acceso Rápido</h2>
      <ion-button fill="clear" size="small" (click)="viewAllActions()">
        Ver todas
        <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
      </ion-button>
    </div>
    
    <div class="quick-actions">
      <div class="action-card" *ngFor="let action of quickActions; let i = index" 
           [attr.data-action-index]="i" 
           (click)="handleAction(action.id)">
        <div class="action-icon">
          <ion-icon [name]="action.icon"></ion-icon>
        </div>
        <span class="action-label">{{ action.label }}</span>
      </div>
    </div>
  </div>

  <!-- Recent Activity -->
  <div class="section-container">
    <div class="section-header">
      <h2>Últimas Noticias</h2>
      <ion-button fill="clear" size="small" (click)="viewAllActivity()">
        Ver todo
        <ion-icon slot="end" name="arrow-forward-outline"></ion-icon>
      </ion-button>
    </div>

    <div class="activity-list">
      <div class="activity-item" *ngFor="let activity of recentActivity; let i = index" 
           [attr.data-activity-index]="i">
        <div class="activity-icon">
          <ion-icon [name]="activity.icon"></ion-icon>
        </div>
        <div class="activity-content">
          <h4>{{ activity.title }}</h4>
          <p>{{ activity.description }}</p>
          <span class="activity-time">{{ activity.time }}</span>
        </div>
        <ion-button fill="clear" class="activity-action" (click)="handleActivity(activity.id)">
          <ion-icon name="chevron-forward-outline"></ion-icon>
        </ion-button>
      </div>
    </div>
  </div>

  <!-- Featured Content -->
  <div class="section-container">
    <div class="section-header">
      <h2>Noticias Destacadas</h2>
    </div>

    <div class="featured-cards">
      <div class="featured-card" *ngFor="let item of featuredItems" (click)="openFeatured(item.id)">
        <div class="featured-image">
          <img [src]="item.image" [alt]="item.title" />
          <div class="featured-overlay"></div>
          <ion-badge class="featured-badge" [color]="item.badgeColor">
            {{ item.badge }}
          </ion-badge>
        </div>
        <div class="featured-content">
          <h3>{{ item.title }}</h3>
          <p>{{ item.description }}</p>
          <div class="featured-meta">
            <span class="meta-item">
              <ion-icon name="time-outline"></ion-icon>
              {{ item.duration }}
            </span>
            <span class="meta-item">
              <ion-icon name="star-outline"></ion-icon>
              {{ item.rating }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Floating Action Button -->
  <ion-fab slot="fixed" vertical="bottom" horizontal="end" class="custom-fab">
    <ion-fab-button (click)="openCreateMenu()">
      <ion-icon name="add"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button color="light" (click)="createNew('article')" title="Nueva Noticia">
        <ion-icon name="newspaper-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="light" (click)="createNew('match')" title="Añadir Partido">
        <ion-icon name="football-outline"></ion-icon>
      </ion-fab-button>
      <ion-fab-button color="light" (click)="createNew('video')" title="Subir Video">
        <ion-icon name="videocam-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>

</ion-content>
